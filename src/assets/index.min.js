/*!
 * Tuto-Box v0.0.1
 *
 * Copyright (C) 2022 Bocovo Juste (@bocovo_juste).
 *
 * Date: Wed, 01 Jun 2022 15:16:20 GMT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TutoBox=e()}(this,(function(){"use strict";function t(t,e,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(t):o?o.value:e.get(t)}const e=(t,e)=>{let n=null;try{n=document.querySelectorAll(t)}catch(t){console.group(),console.log(t),console.error("This error above means you provided a badly constituted selector for data-action-selector attribute . The error is encountered on this element ðŸ‘‡"),console.log(e),console.groupEnd()}return n},n=(t,e,n)=>{n.addEventListener(e,t)},o=(t,e)=>{var n,o;return t.name===(null===(n=t.steps[e])||void 0===n?void 0:n.tuto)&&"end"===(null===(o=t.steps[e])||void 0===o?void 0:o.step)},r=(t,e,n,r)=>{const i=((t,e)=>!t.steps[e+1]&&(!t.dynamic||o(t,e)))(t,e);n("step-change",{tutoName:t.name,step:e,stepData:t.steps[e],next:!!t.steps[e+1],prev:!!t.steps[e-1],end:i,bubbles:r})};function i(t,o=!1){if(this.checkStartedTuto(),this.currentTuto&&void 0!==this.currentStep){this.cleanActionListener();const i=this.currentTuto.dynamic,l=this.currentTuto.steps[t];if(l){const s=this.isTourRunning||(({step:t,currentStep:e,isDynamicTuto:n,prev:o})=>{const r=null==e?void 0:e.step;let i=null==t?void 0:t.step;if("end"===i||"end"===r)return!0;let l=!0;t&&r&&i&&(e.tuto===t.tuto?(l=Number(i)-Number(r)==(o?-1:1),l||n||console.warn(`A non-dynamic tutorial should always have steps ordered from 1 to any number. The tutorial [${t.tuto}] steps in not ordered, near step [${i}]`)):n&&"1"!=t.step?l=!1:o||n||"1"==t.step||t.canStartForm||console.warn(`A non-dynamic tutorial should always start with step 1. This warning is found on tutorial [${t.tuto}]`));return l})({step:l,isDynamicTuto:i,prev:o,currentStep:this.currentTuto.steps[this.currentStep]});if(i&&!s)this.startWaitingForNextStep({runningTuto:this.currentTuto.name,direction:o?"prev":"next"});else{let o;this.isWaitingForStep&&(delete this.isWaitingForStep,this.runCallback("stop-waiting")),this.currentStep=t,i||(o={count:this.currentTuto.steps.length,active:t}),r(this.currentTuto,t,this.runCallback,o),((t,o)=>{if(o.action)if(o.actionSelector){const r=e(o.actionSelector,o.element);r&&r.forEach((e=>{n(t,o.action,e)}))}else n(t,o.action,o.element)})(this.actionNextStep,l)}}else i&&"end"!==this.currentTuto.steps[this.currentStep].step?i&&this.startWaitingForNextStep({runningTuto:this.currentTuto.name,direction:o?"prev":"next"}):this.stopTuto()}}const l=t=>"end"===t?1e4:parseInt(t),s=()=>{throw new Error("The data-step value must be numeric or end")},c=()=>{throw new Error("You must set one of data-step-des or data-step-html")},a=(t,e)=>t.getAttribute(e)||"",u=(t,e)=>{var n;let o=(t.includes("default:")?[...e,"default"]:e).map((e=>({pos:t.indexOf(`${e}:`),tuto:e})));if(o=o.filter((t=>-1!==t.pos)).sort(((t,e)=>t.pos-e.pos)),!o.length)return t;const r={};for(let e=0;e<o.length;e++){const i=o[e],l=t.substring(i.pos,(null===(n=o[e+1])||void 0===n?void 0:n.pos)||void 0);r[i.tuto]=l.trim().replace(`${i.tuto}:`,"")}return r},d=(t,e,n)=>{console.group(),console.error(t),console.log("Error occured on this element"+(n?",for tutorial["+n+"]:":""),e),console.groupEnd()},h=t=>{(t=>(t=>(t=>!!t)(t)&&("number"==typeof t||"string"==typeof t&&/^[0-9]+$/.test(t)))(t)||"end"===t)(t)||s()},f=(t,e,n)=>!!("object"==typeof t[e]?t[e][n]:t[e]),p=(t,e)=>{let n="";return"string"==typeof e[t]?n=e[t]:"object"==typeof e[t]&&(n=e[t].default),n},_=t=>{const e={stepTitle:a(t,"data-step-title"),des:a(t,"data-step-des"),html:a(t,"data-step-html"),tuto:a(t,"data-tuto"),step:a(t,"data-step"),tutoTitle:a(t,"data-tuto-title"),action:a(t,"data-step-action"),actionSelector:a(t,"data-action-selector"),headless:a(t,"data-headless-step"),canStartForm:a(t,"data-can-start-from")||a(t,"data-can-start")||a(t,"data-can-sf"),dynamic:a(t,"data-dynamic-steps")||a(t,"data-dynamic-step")};if(e.tuto){const n=e.tuto.split("|"),o={tuto:n,step:"",element:t},r=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(e,["tuto"]);for(const t in r){const r=t;e[r]&&(o[r]=u(e[r],n))}const i=((t,e)=>{let n=p("step",t);try{h(n)}catch(t){n=""}const o=p("stepTitle",t),r=p("des",t),i=p("html",t),l=!r&&!i&&!o;if(t.tuto.length>1)for(const o of t.tuto){if(t.step[o])try{h(t.step[o])}catch(t){if(!n)return d(t,e,o),!1}else if(!n){try{s()}catch(t){d(t,e,o)}return!1}const r=f(t,"stepTitle",o),i=f(t,"html",o),a=f(t,"des",o);if(!r&&!i&&!a&&l)try{c()}catch(t){return d(t,e,o),!1}}else if(!n||l){try{n?c():s()}catch(t){d(t,e)}return!1}return!0})(o,t);if(i)return o}return!1};function m(t,e=[]){return b(t,e)}function b(t,e,n){let o=!1,r=!1;const i=[];document.querySelectorAll(`*[data-tuto*=${t}]`).forEach((e=>{const n=_(e);if(n){!!n.dynamic&&g(n.dynamic,t)&&(o=!0);const e=g(n.step,t);1===parseInt(e)?r=!0:n.canStartForm&&(r=!!g(n.canStartForm,t)),i.push(v(n,t))}}));let s=!1;const c=null==e?void 0:e.find((e=>e.tutoName===t));if(c&&(s=b(c.extendsTuto,e,!0)),!r&&!s)return n?(console.group(),console.warn(`Tutorial ${t} cannot be started. It lacks the beginning step.`),console.log("You can ignore this warning if your tuto is dynamic."),console.groupEnd()):(t=>{throw new Error(`Cannot run tutoriel [${t}]`)})(t),!1;i.sort(((e,n)=>l(g(e.step,t))-l(g(n.step,t))));return{dynamic:o,name:t,steps:s?[...s.steps,...i]:i,includes:s?[...(null==s?void 0:s.includes)||[],t]:[t]}}const v=(t,e)=>{const n=Object.assign({},t);for(const t in n){const o=t;"element"!==o&&n[o]&&"string"!=typeof n[o]&&(n[o]="tuto"===o?e:n[o][e]||n[o].default)}return n},g=(t,e)=>"string"==typeof t?t:"object"==typeof t?t[e]||t.default:"";function y(t){const e=m(t,this.options.extendsHelpers);if(!e)return!1;const n={tutoName:t};return this.isTourRunning=!1,this.currentTuto=e,this.currentStep=-1,e.dynamic&&this.createObserver(),this.runCallback("before-start-tuto",n),this.runCallback("start-tuto",n),this.next(),!0}function x(){if(!this.currentTuto)throw new Error("Enable to stop tuto because no tuto was started");const t=this.currentTuto.name;this.runCallback("before-stop-tuto",{tutoName:t}),this.isTourRunning||this.cleanActionListener(),delete this.currentTuto,delete this.currentStep,delete this.isTourRunning,!this.isTourRunning&&this.currentObserver&&(this.currentObserver.disconnect(),delete this.currentObserver),this.runCallback("afterStopTuto",{tutoName:t})}var w,T,S,k,C,E,N,O={},L=[],H=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function j(t,e){for(var n in e)t[n]=e[n];return t}function P(t){var e=t.parentNode;e&&e.removeChild(t)}function R(t,e,n,o,r){var i={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++S:r};return null==r&&null!=T.vnode&&T.vnode(i),i}function A(t){return t.children}function D(t,e){this.props=t,this.context=e}function W(t,e){if(null==e)return t.__?W(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?W(t):null}function F(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return F(t)}}function M(t){(!t.__d&&(t.__d=!0)&&k.push(t)&&!B.__r++||E!==T.debounceRendering)&&((E=T.debounceRendering)||C)(B)}function B(){for(var t;B.__r=k.length;)t=k.sort((function(t,e){return t.__v.__b-e.__v.__b})),k=[],t.some((function(t){var e,n,o,r,i,l;t.__d&&(i=(r=(e=t).__v).__e,(l=e.__P)&&(n=[],(o=j({},r)).__v=r.__v+1,z(l,r,o,e.__n,void 0!==l.ownerSVGElement,null!=r.__h?[i]:null,n,null==i?W(r):i,r.__h),G(n,r),r.__e!=i&&F(r)))}))}function U(t,e,n,o,r,i,l,s,c,a){var u,d,h,f,p,_,m,b=o&&o.__k||L,v=b.length;for(n.__k=[],u=0;u<e.length;u++)if(null!=(f=n.__k[u]=null==(f=e[u])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?R(null,f,null,null,f):Array.isArray(f)?R(A,{children:f},null,null,null):f.__b>0?R(f.type,f.props,f.key,null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(h=b[u])||h&&f.key==h.key&&f.type===h.type)b[u]=void 0;else for(d=0;d<v;d++){if((h=b[d])&&f.key==h.key&&f.type===h.type){b[d]=void 0;break}h=null}z(t,f,h=h||O,r,i,l,s,c,a),p=f.__e,(d=f.ref)&&h.ref!=d&&(m||(m=[]),h.ref&&m.push(h.ref,null,f),m.push(d,f.__c||p,f)),null!=p?(null==_&&(_=p),"function"==typeof f.type&&f.__k===h.__k?f.__d=c=I(f,c,t):c=$(t,f,h,b,p,c),"function"==typeof n.type&&(n.__d=c)):c&&h.__e==c&&c.parentNode!=t&&(c=W(h))}for(n.__e=_,u=v;u--;)null!=b[u]&&("function"==typeof n.type&&null!=b[u].__e&&b[u].__e==n.__d&&(n.__d=W(o,u+1)),Q(b[u],b[u]));if(m)for(u=0;u<m.length;u++)K(m[u],m[++u],m[++u])}function I(t,e,n){for(var o,r=t.__k,i=0;r&&i<r.length;i++)(o=r[i])&&(o.__=t,e="function"==typeof o.type?I(o,e,n):$(n,o,o,r,o.__e,e));return e}function $(t,e,n,o,r,i){var l,s,c;if(void 0!==e.__d)l=e.__d,e.__d=void 0;else if(null==n||r!=i||null==r.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(r),l=null;else{for(s=i,c=0;(s=s.nextSibling)&&c<o.length;c+=2)if(s==r)break t;t.insertBefore(r,i),l=i}return void 0!==l?l:r.nextSibling}function V(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||H.test(e)?n:n+"px"}function q(t,e,n,o,r){var i;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof o&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||V(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||V(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?o||t.addEventListener(e,i?X:Y,i):t.removeEventListener(e,i?X:Y,i);else if("dangerouslySetInnerHTML"!==e){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function Y(t){this.l[t.type+!1](T.event?T.event(t):t)}function X(t){this.l[t.type+!0](T.event?T.event(t):t)}function z(t,e,n,o,r,i,l,s,c){var a,u,d,h,f,p,_,m,b,v,g,y=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(c=n.__h,s=e.__e=n.__e,e.__h=null,i=[s]),(a=T.__b)&&a(e);try{t:if("function"==typeof y){if(m=e.props,b=(a=y.contextType)&&o[a.__c],v=a?b?b.props.value:a.__:o,n.__c?_=(u=e.__c=n.__c).__=u.__E:("prototype"in y&&y.prototype.render?e.__c=u=new y(m,v):(e.__c=u=new D(m,v),u.constructor=y,u.render=Z),b&&b.sub(u),u.props=m,u.state||(u.state={}),u.context=v,u.__n=o,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=y.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=j({},u.__s)),j(u.__s,y.getDerivedStateFromProps(m,u.__s))),h=u.props,f=u.state,d)null==y.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==y.getDerivedStateFromProps&&m!==h&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(m,v),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(m,u.__s,v)||e.__v===n.__v){u.props=m,u.state=u.__s,e.__v!==n.__v&&(u.__d=!1),u.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),u.__h.length&&l.push(u);break t}null!=u.componentWillUpdate&&u.componentWillUpdate(m,u.__s,v),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(h,f,p)}))}u.context=v,u.props=m,u.state=u.__s,(a=T.__r)&&a(e),u.__d=!1,u.__v=e,u.__P=t,a=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(o=j(j({},o),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(p=u.getSnapshotBeforeUpdate(h,f)),g=null!=a&&a.type===A&&null==a.key?a.props.children:a,U(t,Array.isArray(g)?g:[g],e,n,o,r,i,l,s,c),u.base=e.__e,e.__h=null,u.__h.length&&l.push(u),_&&(u.__E=u.__=null),u.__e=!1}else null==i&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=J(n.__e,e,n,o,r,i,l,c);(a=T.diffed)&&a(e)}catch(t){e.__v=null,(c||null!=i)&&(e.__e=s,e.__h=!!c,i[i.indexOf(s)]=null),T.__e(t,e,n)}}function G(t,e){T.__c&&T.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){T.__e(t,e.__v)}}))}function J(t,e,n,o,r,i,l,s){var c,a,u,d=n.props,h=e.props,f=e.type,p=0;if("svg"===f&&(r=!0),null!=i)for(;p<i.length;p++)if((c=i[p])&&"setAttribute"in c==!!f&&(f?c.localName===f:3===c.nodeType)){t=c,i[p]=null;break}if(null==t){if(null===f)return document.createTextNode(h);t=r?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,h.is&&h),i=null,s=!1}if(null===f)d===h||s&&t.data===h||(t.data=h);else{if(i=i&&w.call(t.childNodes),a=(d=n.props||O).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!s){if(null!=i)for(d={},p=0;p<t.attributes.length;p++)d[t.attributes[p].name]=t.attributes[p].value;(u||a)&&(u&&(a&&u.__html==a.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(function(t,e,n,o,r){var i;for(i in n)"children"===i||"key"===i||i in e||q(t,i,null,n[i],o);for(i in e)r&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||q(t,i,e[i],n[i],o)}(t,h,d,r,s),u)e.__k=[];else if(p=e.props.children,U(t,Array.isArray(p)?p:[p],e,n,o,r&&"foreignObject"!==f,i,l,i?i[0]:n.__k&&W(n,0),s),null!=i)for(p=i.length;p--;)null!=i[p]&&P(i[p]);s||("value"in h&&void 0!==(p=h.value)&&(p!==t.value||"progress"===f&&!p||"option"===f&&p!==d.value)&&q(t,"value",p,d.value,!1),"checked"in h&&void 0!==(p=h.checked)&&p!==t.checked&&q(t,"checked",p,d.checked,!1))}return t}function K(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){T.__e(t,n)}}function Q(t,e,n){var o,r;if(T.unmount&&T.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||K(o,null,e)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){T.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&Q(o[r],e,"function"!=typeof t.type);n||null==t.__e||P(t.__e),t.__e=t.__d=void 0}function Z(t,e,n){return this.constructor(t,n)}function tt(t,e,n){var o,r,i;T.__&&T.__(t,e),r=(o="function"==typeof n)?null:n&&n.__k||e.__k,i=[],z(e,t=(!o&&n||e).__k=function(t,e,n){var o,r,i,l={};for(i in e)"key"==i?o=e[i]:"ref"==i?r=e[i]:l[i]=e[i];if(arguments.length>2&&(l.children=arguments.length>3?w.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===l[i]&&(l[i]=t.defaultProps[i]);return R(t,l,o,r,null)}(A,null,[t]),r||O,O,void 0!==e.ownerSVGElement,!o&&n?[n]:r?null:e.firstChild?w.call(e.childNodes):null,i,!o&&n?n:r?r.__e:e.firstChild,o),G(i,t)}w=L.slice,T={__e:function(t,e,n,o){for(var r,i,l;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(t)),l=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,o||{}),l=r.__d),l)return r.__E=r}catch(e){t=e}throw t}},S=0,D.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=j({},this.state),"function"==typeof t&&(t=t(j({},n),this.props)),t&&j(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),M(this))},D.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),M(this))},D.prototype.render=A,k=[],C="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,B.__r=0,N=0;var et=0;function nt(t,e,n,o,r){var i,l,s={};for(l in e)"ref"==l?i=e[l]:s[l]=e[l];var c={type:t,props:s,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--et,__source:r,__self:o};if("function"==typeof t&&(i=t.defaultProps))for(l in i)void 0===s[l]&&(s[l]=i[l]);return T.vnode&&T.vnode(c),c}var ot,rt,it,lt=0,st=[],ct=T.__b,at=T.__r,ut=T.diffed,dt=T.__c,ht=T.unmount;function ft(t,e){T.__h&&T.__h(rt,t,lt||e),lt=0;var n=rt.__H||(rt.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function pt(t){return lt=1,function(t,e,n){var o=ft(ot++,2);return o.t=t,o.__c||(o.__=[n?n(e):Tt(void 0,e),function(t){var e=o.t(o.__[0],t);o.__[0]!==e&&(o.__=[e,o.__[1]],o.__c.setState({}))}],o.__c=rt),o.__}(Tt,t)}function _t(t,e){var n=ft(ot++,3);!T.__s&&wt(n.__H,e)&&(n.__=t,n.__H=e,rt.__H.__h.push(n))}function mt(t,e){var n=ft(ot++,7);return wt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function bt(t,e){return lt=8,mt((function(){return t}),e)}function vt(){for(var t;t=st.shift();)if(t.__P)try{t.__H.__h.forEach(yt),t.__H.__h.forEach(xt),t.__H.__h=[]}catch(e){t.__H.__h=[],T.__e(e,t.__v)}}T.__b=function(t){rt=null,ct&&ct(t)},T.__r=function(t){at&&at(t),ot=0;var e=(rt=t.__c).__H;e&&(e.__h.forEach(yt),e.__h.forEach(xt),e.__h=[])},T.diffed=function(t){ut&&ut(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==st.push(e)&&it===T.requestAnimationFrame||((it=T.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(o),gt&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);gt&&(e=requestAnimationFrame(n))})(vt)),rt=null},T.__c=function(t,e){e.some((function(t){try{t.__h.forEach(yt),t.__h=t.__h.filter((function(t){return!t.__||xt(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],T.__e(n,t.__v)}})),dt&&dt(t,e)},T.unmount=function(t){ht&&ht(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{yt(t)}catch(t){e=t}})),e&&T.__e(e,n.__v))};var gt="function"==typeof requestAnimationFrame;function yt(t){var e=rt,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),rt=e}function xt(t){var e=rt;t.__c=t.__(),rt=e}function wt(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function Tt(t,e){return"function"==typeof e?e(t):e}const St=function(t,e){var n={__c:e="__cC"+N++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,o;return this.getChildContext||(n=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(M)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}(null),kt=t=>{const{title:e,tutoName:n}=t;return{title:e,name:n}},Ct=()=>function(t){var e=rt.context[t.__c],n=ft(ot++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(rt)),e.props.value):t.__}(St),Et=t=>nt("svg",Object.assign({height:35,width:35,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t,{children:nt("g",Object.assign({"data-name":"Layer 2"},{children:nt("path",{d:"m20.71 19.29-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z","data-name":"search"})}))})),Nt=({placeholder:t,options:e,onSelect:n,onClear:o,emptyText:r})=>{const[i,l]=pt(!1),[s,c]=pt(""),[a,u]=pt([]),d=bt((()=>l(!1)),[]);return _t((()=>{const t=e.filter((t=>t.toLowerCase().includes(s.toLowerCase())));u(t)}),[s]),_t((()=>(document.body.addEventListener("click",d),()=>{document.body.removeEventListener("click",d)})),[]),nt("div",Object.assign({className:"tbox-auto-complete-wrapper tbox-relative"},{children:nt("div",Object.assign({className:" tbox-w-full tbox-px-5 tbox-py-3 tbox-absolute"},{children:nt("div",Object.assign({onClick:t=>t.stopPropagation(),tabIndex:-1,onFocus:()=>l(!0),className:" tbox-w-full tbox-auto-complete  tbox-px-3 "+(i?"open":"")},{children:[nt("div",Object.assign({className:" tbox-flex tbox-items-center tbox-py-1"},{children:[nt("input",{onFocus:()=>l(!0),type:"search",role:"combobox","aria-autocomplete":"list","aria-expanded":!!a.length,value:s,onInput:t=>{const e=t.target.value;c(e),e||o()},className:" tbox-p-1 focus:tbox-outline-none tbox-border-none tbox-w-full",placeholder:t,"aria-label":t}),nt(Et,{className:" hover:tbox-bg-very-light-primary tbox-rounded-md tbox-p-2 tbox-cursor-pointer tbox-fill-primary"})]})),i&&nt(A,{children:[nt("div",{className:"tbox-divider"}),a.length?nt("ul",Object.assign({className:" tbox-auto-complete-list tbox-py-2 "},{children:a.map((t=>nt("li",Object.assign({onClick:()=>{return e=t,l(!1),c(e),void n(e);var e},className:" hover:tbox-text-primary tbox-cursor-pointer tbox-p-1"},{children:t}),t)))})):nt("p",Object.assign({className:" tbox-font-bold tbox-text-center tbox-py-4 "},{children:r}))]})]}))}))}))},Ot=({title:t,onClick:e})=>nt("button",{title:t,onClick:e,className:" tbox-closer tbox-absolute tbox-top-3 tbox-right-4"}),Lt="tbox-auto-help",Ht=({tutos:t,onStartTuto:e})=>{const n=Ct();return nt("div",{children:t.length?nt("ul",Object.assign({"data-tuto":Lt,"data-step-title":n.htSelectTuto,"data-step":"end",className:" tbox-tuto-list tbox-py-2 tbox-px-3"},{children:t.map(((t,n)=>nt("li",Object.assign({onClick:()=>e(t.name),className:"tbox-cursor-pointer hover:tbox-bg-very-light-primary tbox-font-medium tbox-py-2 tbox-px-2"},{children:t.title}),n)))})):"Empty"})},jt=({extendsHelpers:t,tutobox:e})=>{const n=Ct(),[o,r]=pt(!1),[i,l]=pt(null),s=bt((()=>r(!1)),[]);_t((()=>(e.addEventListener("start-tuto",s),()=>{e.removeEventListener("start-tuto",s)})),[s]);const c=()=>r(!1),{tutos:a,keywords:u}=(t=>{const e=t.filter((t=>t.title)).reduce(((t,e)=>({tutos:[...t.tutos,kt(e)],keywords:[...t.keywords,...e.keywords||[]]})),{tutos:[],keywords:[]}),n=[...new Set(e.keywords)];return{tutos:e.tutos,keywords:n}})(t);return a.length?nt("div",Object.assign({className:"tbox-axe-anim tbox-help-box "+(o?"open":"")},{children:nt("div",Object.assign({className:" tbox-relative tbox-py-1"},{children:[nt("div",Object.assign({className:" tbox-py-1 tbox-px-3"},{children:[nt("button",Object.assign({"data-dynamic-steps":"true","data-tuto":Lt,"data-step-title":n.htButton,"data-step-action":"click","data-step":"1",onClick:()=>r(!0),className:" tbox-text-primary tbox-font-semibold"},{children:n.findHelp})),o&&nt(Ot,{onClick:c})]})),o&&nt(A,{children:[nt("div",{className:" tbox-divider"}),u.length?nt(A,{children:[nt(Nt,{emptyText:n.emptySearch,options:u,placeholder:n.searchPlaceholder,onClear:()=>{l(null)},onSelect:e=>{const n=t.filter((t=>{var n;return null===(n=t.keywords)||void 0===n?void 0:n.includes(e)})).map((t=>kt(t)));l(n)}}),nt("div",{className:" tbox-divider"})]}):null,nt("p",Object.assign({className:"tbox-text-sm tbox-bg-very-light-primary tbox-text-primary tbox-py-1 tbox-px-3"},{children:n.howToFind})),nt("div",{className:" tbox-divider"}),nt(Ht,{onStartTuto:t=>{c(),e.startTuto(t)},tutos:i||a})]})]}))})):null};function Pt(t){return t.split("-")[0]}function Rt(t){return t.split("-")[1]}function At(t){return["top","bottom"].includes(Pt(t))?"x":"y"}function Dt(t){return"y"===t?"height":"width"}function Wt(t,e,n){let{reference:o,floating:r}=t;const i=o.x+o.width/2-r.width/2,l=o.y+o.height/2-r.height/2,s=At(e),c=Dt(s),a=o[c]/2-r[c]/2,u="x"===s;let d;switch(Pt(e)){case"top":d={x:i,y:o.y-r.height};break;case"bottom":d={x:i,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:l};break;case"left":d={x:o.x-r.width,y:l};break;default:d={x:o.x,y:o.y}}switch(Rt(e)){case"start":d[s]-=a*(n&&u?-1:1);break;case"end":d[s]+=a*(n&&u?-1:1)}return d}function Ft(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Mt(t,e){var n;void 0===e&&(e={});const{x:o,y:r,platform:i,rects:l,elements:s,strategy:c}=t,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=e,p=function(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}(f),_=s[h?"floating"===d?"reference":"floating":d],m=Ft(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(_)))||n?_:_.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:a,rootBoundary:u,strategy:c})),b=Ft(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===d?{...l.floating,x:o,y:r}:l.reference,offsetParent:await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),strategy:c}):l[d]);return{top:m.top-b.top+p.top,bottom:b.bottom-m.bottom+p.bottom,left:m.left-b.left+p.left,right:b.right-m.right+p.right}}const Bt=Math.min,Ut=Math.max;function It(t,e,n){return Ut(t,Bt(e,n))}const $t={left:"right",right:"left",bottom:"top",top:"bottom"};function Vt(t){return t.replace(/left|right|bottom|top/g,(t=>$t[t]))}const qt={start:"end",end:"start"};const Yt=["top","right","bottom","left"].reduce(((t,e)=>t.concat(e,e+"-start",e+"-end")),[]);function Xt(t,e,n){return(t?[...n.filter((e=>Rt(e)===t)),...n.filter((e=>Rt(e)!==t))]:n.filter((t=>Pt(t)===t))).filter((n=>!t||(Rt(n)===t||!!e&&function(t){return t.replace(/start|end/g,(t=>qt[t]))}(n)!==n)))}const zt=function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,o,r,i,l;const{x:s,y:c,rects:a,middlewareData:u,placement:d,platform:h,elements:f}=e,{alignment:p=null,allowedPlacements:_=Yt,autoAlignment:m=!0,...b}=t,v=Xt(p,m,_),g=await Mt(e,b),y=null!=(n=null==(o=u.autoPlacement)?void 0:o.index)?n:0,x=v[y];if(null==x)return{};const{main:w,cross:T}=function(t,e,n){void 0===n&&(n=!1);const o=Rt(t),r=At(t),i=Dt(r);let l="x"===r?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=Vt(l)),{main:l,cross:Vt(l)}}(x,a,await(null==h.isRTL?void 0:h.isRTL(f.floating)));if(d!==x)return{x:s,y:c,reset:{placement:v[0]}};const S=[g[Pt(x)],g[w],g[T]],k=[...null!=(r=null==(i=u.autoPlacement)?void 0:i.overflows)?r:[],{placement:x,overflows:S}],C=v[y+1];if(C)return{data:{index:y+1,overflows:k},reset:{placement:C}};const E=k.slice().sort(((t,e)=>t.overflows[0]-e.overflows[0])),N=null==(l=E.find((t=>{let{overflows:e}=t;return e.every((t=>t<=0))})))?void 0:l.placement,O=null!=N?N:E[0].placement;return O!==d?{data:{index:y+1,overflows:k},reset:{placement:O}}:{}}}};const Gt=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,r=await async function(t,e){const{placement:n,platform:o,elements:r}=t,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),l=Pt(n),s=Rt(n),c="x"===At(n),a=["left","top"].includes(l)?-1:1,u=i&&c?-1:1,d="function"==typeof e?e(t):e;let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&"number"==typeof p&&(f="end"===s?-1*p:p),c?{x:f*u,y:h*a}:{x:h*a,y:f*u}}(e,t);return{x:n+r.x,y:o+r.y,data:r}}}};function Jt(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function Kt(t){if(null==t)return window;if(!Jt(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function Qt(t){return Kt(t).getComputedStyle(t)}function Zt(t){return Jt(t)?"":t?(t.nodeName||"").toLowerCase():""}function te(){const t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((t=>t.brand+"/"+t.version)).join(" "):navigator.userAgent}function ee(t){return t instanceof Kt(t).HTMLElement}function ne(t){return t instanceof Kt(t).Element}function oe(t){if("undefined"==typeof ShadowRoot)return!1;return t instanceof Kt(t).ShadowRoot||t instanceof ShadowRoot}function re(t){const{overflow:e,overflowX:n,overflowY:o}=Qt(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function ie(t){return["table","td","th"].includes(Zt(t))}function le(t){const e=/firefox/i.test(te()),n=Qt(t);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||e&&"filter"===n.willChange||e&&!!n.filter&&"none"!==n.filter}function se(){return!/^((?!chrome|android).)*safari/i.test(te())}const ce=Math.min,ae=Math.max,ue=Math.round;function de(t,e,n){var o,r,i,l;void 0===e&&(e=!1),void 0===n&&(n=!1);const s=t.getBoundingClientRect();let c=1,a=1;e&&ee(t)&&(c=t.offsetWidth>0&&ue(s.width)/t.offsetWidth||1,a=t.offsetHeight>0&&ue(s.height)/t.offsetHeight||1);const u=ne(t)?Kt(t):window,d=!se()&&n,h=(s.left+(d&&null!=(o=null==(r=u.visualViewport)?void 0:r.offsetLeft)?o:0))/c,f=(s.top+(d&&null!=(i=null==(l=u.visualViewport)?void 0:l.offsetTop)?i:0))/a,p=s.width/c,_=s.height/a;return{width:p,height:_,top:f,right:h+p,bottom:f+_,left:h,x:h,y:f}}function he(t){return(e=t,(e instanceof Kt(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function fe(t){return ne(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function pe(t){return de(he(t)).left+fe(t).scrollLeft}function _e(t,e,n){const o=ee(e),r=he(e),i=de(t,o&&function(t){const e=de(t);return ue(e.width)!==t.offsetWidth||ue(e.height)!==t.offsetHeight}(e),"fixed"===n);let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&"fixed"!==n)if(("body"!==Zt(e)||re(r))&&(l=fe(e)),ee(e)){const t=de(e,!0);s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}else r&&(s.x=pe(r));return{x:i.left+l.scrollLeft-s.x,y:i.top+l.scrollTop-s.y,width:i.width,height:i.height}}function me(t){return"html"===Zt(t)?t:t.assignedSlot||t.parentNode||(oe(t)?t.host:null)||he(t)}function be(t){return ee(t)&&"fixed"!==getComputedStyle(t).position?t.offsetParent:null}function ve(t){const e=Kt(t);let n=be(t);for(;n&&ie(n)&&"static"===getComputedStyle(n).position;)n=be(n);return n&&("html"===Zt(n)||"body"===Zt(n)&&"static"===getComputedStyle(n).position&&!le(n))?e:n||function(t){let e=me(t);for(oe(e)&&(e=e.host);ee(e)&&!["html","body"].includes(Zt(e));){if(le(e))return e;e=e.parentNode}return null}(t)||e}function ge(t){if(ee(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=de(t);return{width:e.width,height:e.height}}function ye(t){const e=me(t);return["html","body","#document"].includes(Zt(e))?t.ownerDocument.body:ee(e)&&re(e)?e:ye(e)}function xe(t,e){var n;void 0===e&&(e=[]);const o=ye(t),r=o===(null==(n=t.ownerDocument)?void 0:n.body),i=Kt(o),l=r?[i].concat(i.visualViewport||[],re(o)?o:[]):o,s=e.concat(l);return r?s:s.concat(xe(l))}function we(t,e,n){return"viewport"===e?Ft(function(t,e){const n=Kt(t),o=he(t),r=n.visualViewport;let i=o.clientWidth,l=o.clientHeight,s=0,c=0;if(r){i=r.width,l=r.height;const t=se();(t||!t&&"fixed"===e)&&(s=r.offsetLeft,c=r.offsetTop)}return{width:i,height:l,x:s,y:c}}(t,n)):ne(e)?function(t,e){const n=de(t,!1,"fixed"===e),o=n.top+t.clientTop,r=n.left+t.clientLeft;return{top:o,left:r,x:r,y:o,right:r+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(e,n):Ft(function(t){var e;const n=he(t),o=fe(t),r=null==(e=t.ownerDocument)?void 0:e.body,i=ae(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=ae(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let s=-o.scrollLeft+pe(t);const c=-o.scrollTop;return"rtl"===Qt(r||n).direction&&(s+=ae(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:l,x:s,y:c}}(he(t)))}function Te(t){const e=xe(t),n=["absolute","fixed"].includes(Qt(t).position)&&ee(t)?ve(t):t;return ne(n)?e.filter((t=>ne(t)&&function(t,e){const n=null==e||null==e.getRootNode?void 0:e.getRootNode();if(null!=t&&t.contains(e))return!0;if(n&&oe(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&"body"!==Zt(t))):[]}const Se={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:r}=t;const i=[..."clippingAncestors"===n?Te(e):[].concat(n),o],l=i[0],s=i.reduce(((t,n)=>{const o=we(e,n,r);return t.top=ae(o.top,t.top),t.right=ce(o.right,t.right),t.bottom=ce(o.bottom,t.bottom),t.left=ae(o.left,t.left),t}),we(e,l,r));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const r=ee(n),i=he(n);if(n===i)return e;let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((r||!r&&"fixed"!==o)&&(("body"!==Zt(n)||re(i))&&(l=fe(n)),ee(n))){const t=de(n,!0);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}return{...e,x:e.x-l.scrollLeft+s.x,y:e.y-l.scrollTop+s.y}},isElement:ne,getDimensions:ge,getOffsetParent:ve,getDocumentElement:he,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:_e(e,ve(n),o),floating:{...ge(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===Qt(t).direction},ke=(t,e,n)=>(async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:l}=n,s=await(null==l.isRTL?void 0:l.isRTL(e));let c=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:a,y:u}=Wt(c,o,s),d=o,h={};for(let n=0;n<i.length;n++){const{name:f,fn:p}=i[n],{x:_,y:m,data:b,reset:v}=await p({x:a,y:u,initialPlacement:o,placement:d,strategy:r,middlewareData:h,rects:c,platform:l,elements:{reference:t,floating:e}});a=null!=_?_:a,u=null!=m?m:u,h={...h,[f]:{...h[f],...b}},v&&("object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(c=!0===v.rects?await l.getElementRects({reference:t,floating:e,strategy:r}):v.rects),({x:a,y:u}=Wt(c,d,s))),n=-1)}return{x:a,y:u,placement:d,strategy:r,middlewareData:h}})(t,e,{platform:Se,...n}),Ce=t=>({name:"highlighterData",fn:e=>(t(e.rects.reference),{})}),Ee=t=>{const e=function(t){return lt=5,mt((function(){return{current:t}}),[])}(null),[n,o]=pt(null),r=bt((()=>{if(null==e?void 0:e.current){t.scrollIntoView();const r={},i=t=>{Object.assign(r,t)};ke(t,e.current,{middleware:[Ce(i),Gt(12),(void 0===n&&(n={}),{name:"shift",options:n,async fn(t){const{x:e,y:o,placement:r}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:s={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...c}=n,a={x:e,y:o},u=await Mt(t,c),d=At(Pt(r)),h="x"===d?"y":"x";let f=a[d],p=a[h];if(i){const t="y"===d?"bottom":"right";f=It(f+u["y"===d?"top":"left"],f,f-u[t])}if(l){const t="y"===h?"bottom":"right";p=It(p+u["y"===h?"top":"left"],p,p-u[t])}const _=s.fn({...t,[d]:f,[h]:p});return{..._,data:{x:_.x-e,y:_.y-o}}}}),zt({allowedPlacements:["top","bottom","left","right"]})]}).then((t=>{const{x:e,y:n,placement:i}=t;o({x:e,y:n,placement:i,highlighterData:r})}))}var n}),[t]);return _t((()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)})),[r]),{computePos:n,tooltipRef:e,update:r}},Ne=({children:t="",onClick:e,className:n="",loading:o,disabled:r})=>nt("button",Object.assign({disabled:r||o,onClick:e,className:`tbox-btn tbox-px-5 tbox-py-2 tbox-font-semibold disabled:tbox-cursor-not-allowed disabled:tbox-opacity-50 ${n}`},{children:o?nt("div",{class:"loader"}):t})),Oe=({x:t=0,y:e=0,width:n,height:o})=>nt("div",{style:{top:e,left:t,width:n,height:o},className:"tbox-absolute tbox-axe-anim tbox-border-2 tbox-p-1 tbox-shadow-lg tbox-border-solid tbox-border-primary tbox-pointer-events-none tbox-rounded-md tbox-highlighter "}),Le=({count:t,active:e,onClick:n})=>nt("ul",Object.assign({className:"tbox-bubbles"},{children:[...new Array(t).keys()].map(((t,o)=>nt("li",{onClick:()=>n(o),className:""+(o===e?"active":"")})))})),He=({title:t,html:e,des:n,prev:o,next:r,element:i,headless:l,isEnd:s,bubbles:c,waitingForStep:a,nextStep:u,prevStep:d,stopTuto:h,goToStep:f})=>{const p=Ct(),{computePos:_,tooltipRef:m,update:b}=Ee(i);_t((()=>{b()}),[i]);const v=_&&_.y<0?10:null==_?void 0:_.y,g=(({placement:t,tooltipX:e,elementX:n,tooltipY:o,elementY:r})=>{const i={},l=e&&n&&n>e?n-e+10:0,s=o&&r&&r>o?r-o+10:0;switch(l&&(i.marginLeft=l),s&&(i.marginTop=s),t){case"top":i.bottom=-10,i.transform="rotate(180deg)";break;case"left":i.right=-15,i.transform="rotate(90deg)";break;case"right":i.left=-15,i.transform="rotate(-90deg)";break;default:i.top=-10}return i})({placement:10!==v&&_?null==_?void 0:_.placement:"bottom",tooltipX:null==_?void 0:_.x,elementX:null==_?void 0:_.highlighterData.x,tooltipY:v,elementY:null==_?void 0:_.highlighterData.y}),y=l?{}:{top:v,left:null==_?void 0:_.x};return nt("div",Object.assign({className:"tbox-tooltip-main "+(l?"tbox-headless":"")},{children:[!l&&nt(Oe,Object.assign({},null==_?void 0:_.highlighterData)),nt("div",Object.assign({ref:m,style:y,className:"tbox-absolute tbox-axe-anim tooltip-help-box"},{children:[!l&&nt("span",{style:g,className:`tbox-caret tbox-absolute ${(null==_?void 0:_.placement)||"top"}`}),nt("div",Object.assign({className:"tbox-overflow-hidden tbox-rounded-md"},{children:[nt(Ot,{title:p.close,onClick:h}),t?nt("h4",Object.assign({className:" tbox-font-semibold tbox-px-3 tbox-pt-3 tbox-pb-1 "},{children:t})):null,nt("div",Object.assign({className:" tbox-px-3 tbox-my-3"},{children:n?nt("p",{children:n}):e?nt("p",{dangerouslySetInnerHTML:{__html:e}}):null})),nt("div",{className:" tbox-divider"}),nt("div",Object.assign({className:" tbox-flex tbox-flex-row-reverse tbox-justify-between"},{children:[nt(Ne,Object.assign({loading:"next"===a,onClick:u,disabled:!s&&!r,className:"tbox-bg-primary tbox-btn-next hover:tbox-bg-primary-light tbox-text-textwhite "},{children:s?p.finish:p.next})),c&&nt(Le,Object.assign({onClick:t=>f(t+1)},c)),nt(Ne,Object.assign({loading:"prev"===a,onClick:d,disabled:!o,className:"tbox-text-primary tbox-btn-prev hover:tbox-text-pr "},{children:p.prev}))]}))]}))]}))]}))},je=({tutobox:t})=>{const[e,n]=pt(!1),[o,r]=pt(!1),[i,l]=pt(!1),[s,c]=pt(null),[a,u]=pt(null),[d,h]=pt(null),f=bt((t=>{t.stepData&&h(t.stepData),n(!!t.next),r(!!t.prev),l(!!t.end),t.bubbles?c(t.bubbles):c(null)}),[]),p=bt((()=>{var e;u((null===(e=t.isWaitingForStep)||void 0===e?void 0:e.direction)||null)}),[]);_t((()=>(t.addEventListener("step-change",f),t.addEventListener("start-waiting",p),t.addEventListener("stop-waiting",p),()=>{t.removeEventListener("step-change",f),t.removeEventListener("start-waiting",p),t.removeEventListener("stop-waiting",p)})),[]);const _=()=>{t.stopTuto(),h(null),n(!1),r(!1)};return d?nt("div",Object.assign({className:" "},{children:nt(He,{title:d.stepTitle,des:d.des,html:d.html,prev:o,next:e,nextStep:()=>{i?_():t.next()},prevStep:()=>{t.prev()},isEnd:i,element:d.element,headless:!!d.headless,bubbles:s,waitingForStep:a,stopTuto:_,goToStep:t.goToStep})})):null},Pe=t=>{const[e,n]=pt(t.locales),[o,r]=pt(t.extendsHelpers||[]),i=bt((t=>{t.locales&&n(t.locales),t.extendsHelpers&&r(t.extendsHelpers)}),[]);return _t((()=>(t.tutobox.addEventListener("option-change",i),()=>{t.tutobox.removeEventListener("option-change",i)})),[]),nt(St.Provider,Object.assign({value:e},{children:[nt(jt,{tutobox:t.tutobox,extendsHelpers:o}),nt(je,{tutobox:t.tutobox})]}))};function Re(t){this.currentObserver&&(this.currentObserver.disconnect(),delete this.currentObserver);const e=new MutationObserver(t);e.observe(document.body,{childList:!0,subtree:!0}),this.currentObserver=e}function Ae(t){const e=t=>{(!!a(t,"data-tuto")||!!t.querySelector("[data-tuto]"))&&(this.patchUpdate(),this.handleWaitingForStep())};for(let o of t){for(let t of o.addedNodes)if(t instanceof HTMLElement&&this.currentTuto&&void 0!==this.currentStep){e(t);const o=this.currentTuto.steps[this.currentStep];o.action&&o.actionSelector&&t.matches(o.actionSelector)&&n(this.actionNextStep,o.action,t)}for(let t of o.removedNodes)t instanceof HTMLElement&&this.currentTuto&&void 0!==this.currentStep&&e(t)}}function De(){if(this.currentTuto&&void 0!==this.currentStep){const t=this.currentTuto.name,e=this.currentStep,n=this.currentTuto.steps[e],o=m(t,this.options.extendsHelpers);if(o){const i=n?o.steps.findIndex((t=>t.stepTitle===n.stepTitle&&t.step===n.step&&t.tuto===n.tuto&&t.html===n.html&&t.des===n.des&&t.tutoTitle===n.tutoTitle)):-1;this.currentTuto=o,~i&&t===this.currentTuto.name&&e===this.currentStep&&i!==this.currentStep&&(this.currentStep=i),((t,e,n)=>{r(t,e,n)})(this.currentTuto,this.currentStep,this.runCallback)}}}function We(){if(this.checkStartedTuto(),this.currentTuto&&void 0!==this.currentStep){const t=this.currentTuto.steps[this.currentStep];if(!t)return;if(t.action)if(t.actionSelector){const n=e(t.actionSelector,t.element);n&&n.forEach((e=>{e.removeEventListener(t.action,this.actionNextStep)}))}else t.element.removeEventListener(t.action,this.actionNextStep)}}function Fe({runningTuto:t,direction:e}){console.info("Waiting for next step to be available."),this.isWaitingForStep={tuto:t,direction:e},this.runCallback("start-waiting")}function Me(){this.isWaitingForStep&&this.currentTuto&&this.next()}const Be=(t,e,n)=>{const o={count:t.steps.length,active:e};r(t,e,n,o)};function Ue(){const t=document.querySelectorAll("[data-step-title]:not([data-tuto])");if(t.length){let e=[];t.forEach(((t,n)=>{e.push({element:t,des:a(t,"data-step-des"),html:a(t,"data-step-html"),stepTitle:a(t,"data-step-title"),step:String(n),tuto:"tour",headless:a(t,"data-headless-step")})}));const n={steps:e,name:"tour",dynamic:!1};this.currentTuto=n,this.currentStep=0,this.isTourRunning=!0,Be(this.currentTuto,this.currentStep,this.runCallback)}}function Ie(){this.currentTuto&&null!=this.currentStep&&(this.currentStep=this.currentStep+1,Be(this.currentTuto,this.currentStep,this.runCallback))}function $e(){this.currentTuto&&null!=this.currentStep&&(this.currentStep=this.currentStep-1,Be(this.currentTuto,this.currentStep,this.runCallback))}var Ve,qe,Ye,Xe,ze,Ge;const Je={close:"Close",next:"Next",prev:"Prev",findHelp:"Find help here.",howToFind:"Scroll tutorial below and click on tutorial you search for.",searchPlaceholder:"Tape keyword here.",emptySearch:"No result found.",finish:"Finish",htButton:"Button",htSelectTuto:"Select"};class Ke{constructor(t){Ve.add(this),this.eventsCallbacks={},this.actionNextStep=()=>{this.next()},this.runCallback=(t,e)=>{var n;this.eventsCallbacks[t]&&(null===(n=this.eventsCallbacks[t])||void 0===n||n.forEach((t=>{try{t(e)}catch(t){console.error(t)}})))},this.goToStep=t=>{t<1?console.error(`The value ${t} is invalid as step number. The steps are numbered from 1.`):i.call(this,t-1)},this.options=t}cleanActionListener(){We.call(this)}checkStartedTuto(){if(!this.currentTuto||void 0===this.currentStep)throw new Error("No tuto or tour was started. Make sure you call TutoBox.startTuto() with the name of desired tuto before call TutoBox.nextStep() or TutoBox.prevStep() method.")}patchUpdate(){De.call(this)}createObserver(){Re.call(this,t(this,Ve,"m",qe).bind(this))}startWaitingForNextStep(...t){Fe.call(this,...t)}handleWaitingForStep(){Me.call(this)}addEventListener(t,e){var n;if("function"!=typeof e)throw new Error("The event listener callback must be a function.");this.eventsCallbacks[t]||(this.eventsCallbacks[t]=[]);-1==this.eventsCallbacks[t].indexOf(e)&&(null===(n=this.eventsCallbacks[t])||void 0===n||n.push(e))}removeEventListener(t,e){var n,o;if(this.eventsCallbacks[t]){if(~this.eventsCallbacks[t].indexOf(e))return this.eventsCallbacks[t]=null===(n=this.eventsCallbacks[t])||void 0===n?void 0:n.filter((t=>t==e)),0===(null===(o=this.eventsCallbacks[t])||void 0===o?void 0:o.length)&&delete this.eventsCallbacks[t],!0;console.warn("The callback function you are trying to remove was not found. This may be because you have a function reference other than the one used to add the callback function.")}return!1}startTuto(...t){y.call(this,...t)}startTour(){Ue.call(this)}stopTuto(){x.call(this)}next(){this.checkStartedTuto(),this.isTourRunning?t(this,Ve,"m",Ye).call(this):t(this,Ve,"m",ze).call(this)}prev(){this.checkStartedTuto(),this.isTourRunning?t(this,Ve,"m",Xe).call(this):t(this,Ve,"m",Ge).call(this)}setLocales(t){const e=Object.assign(Object.assign({},this.options.locales),t);this.options.locales=e,this.runCallback("option-change",{locales:e})}setExtendsHelpers(t){this.options.extendsHelpers=t,this.runCallback("option-change",{extendsHelpers:t})}}Ve=new WeakSet,qe=function(...t){Ae.call(this,...t)},Ye=function(){Ie.call(this)},Xe=function(){$e.call(this)},ze=function(){if(null!=this.currentStep){const t=this.currentStep+1;return i.call(this,t)}},Ge=function(){if(null!=this.currentStep){const t=this.currentStep-1;return i.call(this,t,!0)}};return({locales:t,extendsHelpers:e}={})=>{const n={locales:Object.assign(Object.assign({},Je),t||{}),extendsHelpers:e},o=new Ke(n);return function(t,e){const n="tuto-box-root-element";let o=document.getElementById(n);o||(o=document.createElement("div"),o.id=n,o.classList.add("tbox"),document.body.appendChild(o),tt(nt(Pe,Object.assign({tutobox:e},t)),o))}(o.options,o),o}}));
//# sourceMappingURL=index.min.js.map
